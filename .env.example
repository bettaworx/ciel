
# Backend environment (prod or dev)
# Development is the default if not set
ENV=development

# Backend API base URL (used by frontend)
NEXT_PUBLIC_API_BASE_URL=http://localhost:6137

# Backend API base URL (used by backend)
PUBLIC_BASE_URL=http://localhost:6137

# Backend Server Port (Default: 6137)
BACKEND_PORT=6137

# Frontend Server Port (Default: 3000)
FRONTEND_PORT=3000

# Bind address for Docker port publishing
# Use 0.0.0.0 to allow access from other hosts (VPN/LAN)
BIND_ADDR=127.0.0.1

# Allowed CORS origins (comma-separated list, exact match only)
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

TRUST_PROXY=true
STEPUP_TOKEN_TTL_SECONDS=300

# Cookie security
# Examples: "example.com" or ".example.com" (with dot to include subdomains)
# Leave empty for development (defaults to current domain)
COOKIE_DOMAIN=

# Redis connection
# Format: redis://:your-password@redis:6379
# REQUIRED in production: minimum 16 characters
# Generate password: openssl rand -base64 32
REDIS_ADDR=redis://:password@redis:6379
REDIS_PASSWORD=password

# Media storage directory
# The server will attempt to create this directory on startup with 0755 permissions
# If initialization fails (e.g., due to insufficient permissions), media uploads will return 503
# Recommended: Use absolute path or ensure the parent directory is writable
# Examples:
#   - Relative path (resolved from working directory): ./data/media
#   - Absolute path: /var/lib/ciel/media
MEDIA_DIR=./data/media

# Realtime WebSocket signing secret (REQUIRED in production)
# REQUIRED: minimum 32 characters
# Generate: openssl rand -base64 32
# DO NOT use placeholder values like "replace" or "changeme"
REALTIME_SIGNING_SECRET=replace
REALTIME_WS_MAX_CONNECTIONS=1000
REALTIME_WS_MAX_CONNECTIONS_PER_IP=50

# PostgreSQL Configuration
POSTGRES_DB=ciel
POSTGRES_USER=ciel
# SECURITY CRITICAL: Set strong password (32+ characters recommended)
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=password

# Database connection URL
# IMPORTANT: Use strong password (not the placeholder "ciel")
# Production: MUST NOT contain weak passwords like "ciel", "postgres", "password"
DATABASE_URL=postgres://ciel:password@db:5432/ciel?sslmode=disable

# JWT Secret (REQUIRED in all environments)
# REQUIRED: minimum 32 characters
# Generate: openssl rand -base64 32
JWT_SECRET=replacereplacereplacereplacereplace

# Initial setup password (REQUIRED in all environments)
# After setup is complete, you may remove this from the environment.
INITIAL_SETUP_PASSWORD=your-setup-passphrase-here

# Config file path (optional, defaults to ./config/config.yaml)
CONFIG_PATH=./config/config.yaml
